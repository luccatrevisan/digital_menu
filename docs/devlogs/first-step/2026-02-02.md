## 02/02/2026 - Model Stock

### Objetivo do dia
Implementar um model de estoque para gerenciar os itens do cardápio e evitar pedidos que seriam cancelados por indisponibilidade.

### O que implementei
- Model Stock
```python
    class Stock(models.Model):
        menu_item = models.OneToOneField(MenuItem, on_delete=models.CASCADE)
        quantity = models.IntegerField(default=0)
        minimum_stock = models.IntegerField(default=0)

    def __str__(self):
        return f"{self.quantity} unidades disponíveis."
```
- Admin Stock
```python
    class StockAdmin(admin.ModelAdmin):
        list_display = ["menu_item", "quantity"]
        list_filter = ["quantity"]

    admin.site.register(Stock, StockAdmin)
```

### Decisões
- **Por que escolhi OneToOneField em vez de ForeignKey:**
  ForeignKey é melhor aproveitado em relacionamentos com maior cardinalidade. OneToOneField garante mais consistência nos dados e, como o próprio nome do campo indica, é melhor aproveitado para esse tipo de relacionamento entre estoque e produto. Cada produto tem um estoque e cada estoque pertence a um produto.

### Desafios
1. Entender como usar o model Stock como um todo.
   - **O que aprendi:** Percebi que estou com certa dificuldade em entender como modelar o banco de dados ao ter travado enquanto estava escrevendo o model. Eu demorei um pouco pra entender o motivo de eu não simplesmente escrever o estoque no model MenuItem ao invés de criar uma nova entidade somente para o estoque. Em código, poderia ser mais simples só adicionar um ou dois atributos no MenuItem. Porém, no banco, separar essas duas entidades pode ser interessante por realizarem operações diferentes. O MenuItem serviria informações para o cardápio, enquanto o Stock serviria para realizar operações e validações, também garantindo uma experiência melhor para o usuário final - mas de um jeito mais "escondido", mais operacional. Sem comentar que o estoque muda sempre, enquanto o item do cardápio muda raramente - se mudar. São entidades diferentes.
   - **Próximos passos:** Pretendo estudar mais a fundo bancos de dados e, principalmente, modelagem. Me foi recomendado o curso de introdução a bancos de dados de harvard (CS50). Deixei o model mais simples para depois implementar algumas validações. No código atual, é possível colocar um estoque negativo apesar de o default ser zero.

### Referências
- https://docs.djangoproject.com/en/6.0/topics/db/examples/one_to_one/
- https://docs.djangoproject.com/en/6.0/ref/models/fields/#django.db.models.IntegerField
- https://docs.djangoproject.com/en/6.0/ref/validators/#django.core.validators.MinValueValidator

---